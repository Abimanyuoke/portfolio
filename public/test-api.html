<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Form Test</title>
</head>

<body>
    <h1>Contact Form API Test</h1>
    <button onclick="testAPI()">Test API</button>
    <div id="result"></div>

    <script>
        async function testAPI() {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = 'Testing...';

            try {
                console.log('ğŸ§ª Starting API test...');

                const testData = {
                    name: 'Test User',
                    email: 'test@example.com',
                    message: 'This is a test message from the API test page. Testing email functionality.'
                };

                console.log('ğŸ“¤ Sending request with data:', testData);

                const response = await fetch('/api/contact', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(testData),
                });

                console.log('ğŸ“¨ Response status:', response.status);
                console.log('ğŸ”— Response URL:', response.url);

                const data = await response.json();
                console.log('ğŸ“‹ Response data:', data);

                if (response.ok) {
                    resultDiv.innerHTML = `
                        <div style="color: green; padding: 10px; border: 1px solid green; border-radius: 5px; margin: 10px 0;">
                            âœ… <strong>Success!</strong><br>
                            ${data.message}<br>
                            ${data.messageId ? `Message ID: ${data.messageId}` : ''}
                        </div>`;
                } else {
                    resultDiv.innerHTML = `
                        <div style="color: red; padding: 10px; border: 1px solid red; border-radius: 5px; margin: 10px 0;">
                            âŒ <strong>Error ${response.status}:</strong><br>
                            ${data.error || 'Unknown error'}
                        </div>`;
                }
            } catch (error) {
                console.error('ğŸ’¥ Test error:', error);
                resultDiv.innerHTML = `
                    <div style="color: red; padding: 10px; border: 1px solid red; border-radius: 5px; margin: 10px 0;">
                        âŒ <strong>Network Error:</strong><br>
                        ${error.message}
                    </div>`;
            }
        }
    </script>
</body>

</html>